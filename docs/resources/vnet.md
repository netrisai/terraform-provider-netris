---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "netris_vnet Resource - terraform-provider-netris"
subcategory: ""
description: |-
  Creates and manages Vnets
---

# netris_vnet

V-Net is a virtual networking service that provide a Layer-2 (unrouted) or Layer-3 (routed) virtual network segments on network interfaces anywhere on the switch fabric. V-NETs can be created and managed by a single tenant (single team) or they can be created and managed collaboratively by multiple tenants (different teams inside and/or outside the organization). Netris automatically configures a VXLAN with an EVPN control plane over an unnumbered BGP Layer-3 underlay network and organize the high availability for the default gateway behind the scenes.

~> **Note:** Vnet require subnets and hardware to exist prior to resource creation. Use `depends_on` to set an explicit dependency on the subnets and hardware.


## Example Usages

```hcl
data "netris_site" "santa-clara" {
  name = "Santa Clara"
}

data "netris_tenant" "admin" {
  name = "Admin"
}

resource "netris_vnet" "my-vnet" {
  name = "my-vnet"
  tenantid = data.netris_tenant.admin.id
  # vlanid = "auto"
  state = "active"
  sites {
    id = data.netris_site.santa-clara.id
    gateways {
      prefix = "203.0.113.1/25"
      dhcp   = "enabled"
    }
    gateways {
      prefix = "2001:db8:acad::fffe/64"
    }
    interface {
      name = "swp5@my-sw01"
      vlanid = 1050
    }
    interface {
      name = "swp7@my-sw02"
    }
    interface {
      id = netris_lag.lag1-switch-01.id
    }
  }
  depends_on = [
    netris_switch.my-sw01,
    netris_switch.my-sw02,
    netris_subnet.my-subnet-common,
  ]
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **name** (String) The name of the vnet
- **sites** (Block List, Min: 1) Block of per site vnet configuration (see [below for nested schema](#nestedblock--sites))
- **tenantid** (Number) ID of tenant. Users of this tenant will be permitted to edit this unit.

### Optional

- **state** (String) V-Net state. Allowed values: `active` or `disabled`. Default value is `active`
- **tags** (List of String) List of tags. Example `["foo", "bar"]`
- **vlanid** (String) VLAN tag for all network interfaces of the vnet. Also can be `auto`. If set `auto` the controller will assign a vlan ID  automatically.
- **vpcid** (Number) ID of VPC. If not specified, the vnet will be created in the VPC marked as a default.
- **vxlanid** (Number) VXLAN ID. If not specified will be generated automatically.

<a id="nestedblock--sites"></a>
### Nested Schema for `sites`

Required:

- **id** (Number) The site ID. Network interfaces from these sites will be allowed to participate in the V-Net. (Multi-site vnet would require backbone connectivity between sites).

Optional:

- **gateways** (Block List) Block of gateways (see [below for nested schema](#nestedblock--sites--gateways))
- **interface** (Block List) Block for network interface (see [below for nested schema](#nestedblock--sites--interface))

<a id="nestedblock--sites--gateways"></a>
### Nested Schema for `sites.gateways`

Required:

- **prefix** (String) The address will be serving as anycast default gateway for selected subnet. Example: `203.0.113.1/25`


Optional:

- **dhcp** (String) Enable DHCP server. Allowed values: `enabled` or `disabled`. Default value is `disabled`. (Only for IPv4 Gateway)
- **dhcpoptionsetid** (Number) The ID of DHCP Options Set. If not set, the Default DHCP Options Set will be chosen. (Only for IPv4 Gateway)
- **dhcpstartip** (String) DHCP range start IP. If not set the controller will assign automatically. (Only for IPv4 Gateway)
- **dhcpendip** (String) DHCP range end IP. If not set the controller will assign automatically. (Only for IPv4 Gateway)


<a id="nestedblock--sites--interface"></a>
### Nested Schema for `sites.interface`

Optional:

- **id** (Number) Network interface ID. Example: `data.netris_network_interface.swp5-my-sw91.id`. Can't be used together `name`.
- **name** (String) Network interface name. Example: `swp5@my-sw01`. Can't be used together `id`.
- **vlanid** (String) VLAN tag for the current interface. Cannot be used together with global `vlanid`. If the main `vlanid` is also not set - means untagged. (Only for Netris Switch Fabric)
- **untagged** (String) This option is applicable only when a global `vlanid` is set. In such cases, the default value is `yes`. The valid value is `yes` or `no`. (Applicable exclusively to Netris Switch Fabric)
