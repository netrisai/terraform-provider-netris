---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "netris_nat Resource - terraform-provider-netris"
subcategory: ""
description: |-
  Creates and manages NATs
---

# netris_nat

Netris SoftGate nodes are required to support NAT (Network Address Translation). To enable NAT for a given site, you first need to create a subnet with NAT purpose in the IPAM section. NAT IP addresses can be used for SNAT or DNAT as a global IP address (the public IP visible on the Internet). NAT IP pools are IP address ranges that SNAT can use as a rolling global IP (for a larger scale, similar to carrier-grade SNAT). SNAT is always overloading the ports, so many local hosts can share one or just a few public IP addresses. You can add as many NAT IP addresses and NAT pools as you need.

~> **Note:** NAT rules require subnets to exist prior to resource creation. Use `depends_on` to set an explicit dependency on the subnets.


## Example Usages

```hcl
data "netris_site" "santa-clara" {
  name = "Santa Clara"
}
```

### SNAT 

```hcl
resource "netris_nat" "my_snat" {
  name = "MY SNAT"
  comment = "Terraform Test SNAT"
  state = "enabled"
  siteid = data.netris_site.santa-clara.id
  action = "SNAT"
  protocol = "all"
  srcaddress = "10.10.10.0/24"
  dstaddress = "0.0.0.0/0"
  snattoip = "203.0.113.192"
  # snattopool = "203.0.113.192/26"
  depends_on = [netris_subnet.my-subnet-common, netris_subnet.my-subnet-nat]
}
```

### DNAT

```hcl
resource "netris_nat" "my_dnat" {
  name = "MY DNAT"
  state = "enabled"
  siteid = data.netris_site.santa-clara.id
  action = "DNAT"
  protocol = "tcp"
  srcaddress = "0.0.0.0/0"
  srcport = "1-65535"
  dstaddress = "203.0.113.193/32"
  dstport = "8080"
  dnattoip = "10.10.10.60/32"
  dnattoport = 80
  depends_on = [netris_subnet.my-subnet-common, netris_subnet.my-subnet-nat]
}
```

### DNAT W/ PORT GROUP

```hcl
resource "netris_nat" "my_dnat_with_port_group" {
  name = "MY DNAT w/ PORT GROUP"
  state = "enabled"
  siteid = data.netris_site.santa-clara.id
  action = "DNAT"
  protocol = "tcp"
  srcaddress = "0.0.0.0/0"
  srcport = "1-65535"
  dstaddress = "203.0.113.193/32"
  portgroupid = netris_portgroup.my_portgroup.id
  dnattoip = "10.10.10.60/32"
  depends_on = [netris_subnet.my-subnet-common, netris_subnet.my-subnet-nat]
}
```

### ACCEPT (Excluding destination network from already defined SNAT Rule)

```hcl
resource "netris_nat" "my_snat_accept" {
  name = "MY SNAT ACCEPT"
  state = "enabled"
  siteid = data.netris_site.santa-clara.id
  action = "ACCEPT_SNAT"
  protocol = "all"
  srcaddress = "10.10.10.0/24"
  dstaddress = "10.10.0.0/16"
  depends_on = [netris_subnet.my-subnet-common]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **action** (String) Rule action. Possible values: `DNAT`, `SNAT`, `ACCEPT_SNAT`, `MASQUERADE`
- **dstaddress** (String) Match traffic destined to this subnet
- **name** (String) The unique name of NAT rule
- **protocol** (String) Possible values: `all`, `tcp`, `udp`, `icmp`
- **siteid** (Number) The site ID where this rule belongs
- **srcaddress** (String) Match traffic sourced from this subnet

### Optional

- **comment** (String) Custom comment for NAT rule
- **dnattoip** (String) The internal IP address to which external hosts will gain access as a result of a DNAT translation. Only when action == `DNAT`
- **dnattoport** (String) The internal port to which external port will gain access as a result of a DNAT translation. Only when action == `DNAT`.  Ignoring when `portgroupid` is set
- **dstport** (String) Match traffic destined to this port. Ignoring when protocol == `all` or `icmp. Ignoring when `portgroupid` is set`
- **portgroupid** (Number) ID of a Port Group. Port Group will apply the list of ports to `dstport` and `dnattoport`. Only when action == `DNAT` and protocol == `tcp` or `udp`
- **snattoip** (String) Replace the original address with the specified one. Only when action == `SNAT`
- **snattopool** (String) Replace the original address with the pool of ip addresses. Only when action == `SNAT`
- **srcport** (String) Match traffic sourced from this port. Ignoring when protocol == `all` or `icmp`
- **state** (String) Rule state. Valid value is `enabled` or `disabled`. Default value is `enabled`.
